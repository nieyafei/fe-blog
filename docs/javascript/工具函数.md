# å·¥å…·å‡½æ•°

## æ£€æµ‹ç§»åŠ¨/PCè®¾å¤‡

```js
const detectDeviceType = () =>
  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
    ? 'Mobile'
    : 'Desktop';
```

## åˆ¤æ–­æ‰‹æœºæ˜¯Andoirdè¿˜æ˜¯IOS

```js
/**
 *  0: ios
 *  1: android
 *  2: å…¶å®ƒ
 */
export function getOSType() {
    let u = navigator.userAgent, app = navigator.appVersion;
    let isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1;
    let isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
    if (isIOS) {
        return 0;
    }
    if (isAndroid) {
        return 1;
    }
    return 2;
}
```

## åˆ¤æ–­æ˜¯å¦æ˜¯å¾®ä¿¡,qq æˆ– uc

```js
/**
 * åˆ¤æ–­æ˜¯å¦æ˜¯å¾®ä¿¡,qq æˆ– uc
 */
export const checkWeixinQqUc = () => {
 
  const u = navigator.userAgent;
  const obj = {
    weixin: u.indexOf("MicroMessenger") > -1, //æ˜¯å¦å¾®ä¿¡
    qq: u.match(/QQ/i) == "qq"&&!u.indexOf('MQQBrowser') > -1, //æ˜¯å¦QQ
    uc: u.indexOf('UCBrowser') > -1
  }
  return Object.keys(obj)[Object.values(obj).indexOf(true)]
};
```

## åˆ¤æ–­æ˜¯æµè§ˆå™¨å†…æ ¸

```js
/**
 * åˆ¤æ–­æ˜¯æµè§ˆå™¨å†…æ ¸
 */
export const checkBrowser = () => {
  const u = navigator.userAgent;
  const obj = {
    trident: u.indexOf("Trident") > -1, //IEå†…æ ¸
    presto: u.indexOf("Presto") > -1, //operaå†…æ ¸
    webKit: u.indexOf("AppleWebKit") > -1, //è‹¹æœã€è°·æ­Œå†…æ ¸
    gecko: u.indexOf("Gecko") > -1 && u.indexOf("KHTML") == -1, //ç«ç‹å†…æ ¸
  }
  return Object.keys(obj)[Object.values(obj).indexOf(true)]
};
```

## è¿”å›å½“å‰24å°æ—¶åˆ¶æ—¶é—´çš„å­—ç¬¦ä¸²

```js
const getColonTimeFromDate = date => date.toTimeString().slice(0, 8); // 10:58:04 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) æˆªå–

getColonTimeFromDate(new Date()); // "10:57:44"
```

## è¿”å›æ—¥æœŸé—´çš„å¤©æ•°

```js
const getDaysDiffBetweenDates = (dateInitial, dateFinal) =>
  (dateFinal - dateInitial) / (1000 * 3600 * 24);
  
getDaysDiffBetweenDates(new Date('2019-01-01'), new Date('2019-10-14')); // 286
```

## å¹³æ»‘æ»šåŠ¨è‡³é¡¶éƒ¨

```js
const scrollToTop = () => {
  const c = document.documentElement.scrollTop || document.body.scrollTop;
  if (c > 0) {
    window.requestAnimationFrame(scrollToTop);
    window.scrollTo(0, c - c / 8);
  }
};

scrollToTop();
```

## æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ åŒºåŸŸ

```js
const smoothScroll = element =>
  document.querySelector(element).scrollIntoView({
    behavior: 'smooth'
  });
  
smoothScroll('#fooBar');
smoothScroll('.fooBar');
```

## æ£€æµ‹ç§»åŠ¨/PCè®¾å¤‡

```js
const detectDeviceType = () =>
  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
    ? 'Mobile'
    : 'Desktop';
```

## è¿”å›å½“å‰çš„æ»šåŠ¨ä½ç½®

é»˜è®¤å‚æ•°ä¸º`window` ï¼Œ`pageXOffset(pageYOffset)`ä¸ºç¬¬ä¸€é€‰æ‹©ï¼Œæ²¡æœ‰åˆ™ç”¨`scrollLeft(scrollTop)`

```js
const getScrollPosition = (el = window) => ({
  x: el.pageXOffset !== undefined ? el.pageXOffset : el.scrollLeft,
  y: el.pageYOffset !== undefined ? el.pageYOffset : el.scrollTop
});

getScrollPosition(); // {x: 0, y: 200}
```

## è½¬ä¹‰HTML

```js
const escapeHTML = str =>
  str.replace(
    /[&<>'"]/g,
    tag =>
      ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        "'": '&#39;',
        '"': '&quot;'
      }[tag] || tag)
  );

escapeHTML('<a href="#">Me & you</a>'); // '&lt;a href=&quot;#&quot;&gt;Me &amp; you&lt;/a&gt;'
```

## éšæœºåå…­è¿›åˆ¶é¢œè‰²

```js

const randomHexColorCode = () => {
  let n = (Math.random() * 0xfffff * 1000000).toString(16);
  return '#' + n.slice(0, 6);
};

randomHexColorCode(); // "#e34155"
```

```js
const RandomColor = () => "#" + Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, "0");
const color = RandomColor();
// color => "#f03665"
```

## é¦–å­—æ¯å°å†™

```js
const decapitalize = ([first, ...rest]) =>
  first.toLowerCase() + rest.join('')

decapitalize('FooBar'); // 'fooBar'
decapitalize('FooBar'); // 'fooBar'
```

## é¦–å­—æ¯å¤§å†™

```js
const capitalize = ([first, ...rest]) =>
  first.toUpperCase() + rest.join('');
  
capitalize('fooBar'); // 'FooBar'
capitalize('fooBar', true); // 'Foobar'
```

## æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™

```js
const capitalizeEveryWord = str => str.replace(/\b[a-z]/g, char => char.toUpperCase());

capitalizeEveryWord('hello world!'); // 'Hello World!'
```

## è¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦

```js
const byteSize = str => new Blob([str]).size;

byteSize('ğŸ˜€'); // 4
byteSize('Hello World'); // 11
```

## æ¨è¿Ÿå‡½æ•°çš„æ‰§è¡Œ

```js
const defer = (fn, ...args) => setTimeout(fn, 1, ...args);

defer(console.log, 'a'), console.log('b'); // logs 'b' then 'a'
```

## è¿‡æ»¤XSS

```js
function FilterXss(content) {
    let elem = document.createElement("div");
    elem.innerText = content;
    const result = elem.innerHTML;
    elem = null;
    return result;
}
```

## å­˜å–LocalStorage

> ååºåˆ—åŒ–å–ï¼Œåºåˆ—åŒ–å­˜

```js
const love = JSON.parse(localStorage.getItem("love"));
localStorage.setItem("love", JSON.stringify("I Love You"));
```

## æ ¼å¼åŒ–é‡‘é’±

```js
const ThousandNum = num => num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
const money = ThousandNum(20190214);
// money => "20,190,214"
```

## ç”ŸæˆéšæœºID

```js
const RandomId = len => Math.random().toString(36).substr(3, len);
const id = RandomId(10);
// id => "jg7zpgiqva"
```

## ç”Ÿæˆæ˜Ÿçº§è¯„åˆ†

```js
const StartScore = rate => "â˜…â˜…â˜…â˜…â˜…â˜†â˜†â˜†â˜†â˜†".slice(5 - rate, 10 - rate);
const start = StartScore(3);
// start => "â˜…â˜…â˜…"
```

## æ“ä½œURLæŸ¥è¯¢å‚æ•°

```js
const params = new URLSearchParams(location.search.replace(/\?/ig, "")); // location.search = "?name=young&sex=male"
params.has("young"); // true
params.get("sex"); // "male"
```

## æ˜¯å¦ä¸ºç©ºæ•°ç»„

```js
const arr = [];
const flag = Array.isArray(arr) && !arr.length;
// flag => true
```

## æ˜¯å¦ä¸ºç©ºå¯¹è±¡

```js
const obj = {};
const flag = DataType(obj, "object") && !Object.keys(obj).length;
// flag => true
```

## é‡‘é’±æ ¼å¼åŒ–ï¼Œä¸‰ä½åŠ é€—å·

```js
/**
 *  @param { number } num
 */
export const formatMoney = num => num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
```

## è·å–æ–‡ä»¶base64ç¼–ç 

```js
/**
 * @param file
 * @param format  æŒ‡å®šæ–‡ä»¶æ ¼å¼
 * @param size  æŒ‡å®šæ–‡ä»¶å¤§å°(å­—èŠ‚)
 * @param formatMsg æ ¼å¼é”™è¯¯æç¤º
 * @param sizeMsg   å¤§å°è¶…å‡ºé™åˆ¶æç¤º
 * @returns {Promise<any>}
 */
export function fileToBase64String(file, format = ['jpg', 'jpeg', 'png', 'gif'], size = 20 * 1024 * 1024, formatMsg = 'æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®', sizeMsg = 'æ–‡ä»¶å¤§å°è¶…å‡ºé™åˆ¶') {
    return new Promise((resolve, reject) => {
        // æ ¼å¼è¿‡æ»¤
        let suffix = file.type.split('/')[1].toLowerCase();
        let inFormat = false;
        for (let i = 0; i < format.length; i++) {
            if (suffix === format[i]) {
                inFormat = true;
                break;
            }
        }
        if (!inFormat) {
            reject(formatMsg);
        }
        // å¤§å°è¿‡æ»¤
        if (file.size > size) {
            reject(sizeMsg);
        }
        // è½¬base64å­—ç¬¦ä¸²
        let fileReader = new FileReader();
        fileReader.readAsDataURL(file);
        fileReader.onload = () => {
            let res = fileReader.result;
            resolve({base64String: res, suffix: suffix});
            reject('å¼‚å¸¸æ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©');
        }
    })
}
```

## Bè½¬æ¢åˆ°KB,MB,GBå¹¶ä¿ç•™ä¸¤ä½å°æ•°

```js
/**
 * @param { number } fileSize
 */
export function formatFileSize(fileSize) {
    let temp;
    if (fileSize < 1024) {
        return fileSize + 'B';
    } else if (fileSize < (1024 * 1024)) {
        temp = fileSize / 1024;
        temp = temp.toFixed(2);
        return temp + 'KB';
    } else if (fileSize < (1024 * 1024 * 1024)) {
        temp = fileSize / (1024 * 1024);
        temp = temp.toFixed(2);
        return temp + 'MB';
    } else {
        temp = fileSize / (1024 * 1024 * 1024);
        temp = temp.toFixed(2);
        return temp + 'GB';
    }
}
```

## base64è½¬file

```js
/**
 *  @param { base64 } base64
 *  @param { string } filename è½¬æ¢åçš„æ–‡ä»¶å
 */
export const base64ToFile = (base64, filename )=> {
    let arr = base64.split(',');
    let mime = arr[0].match(/:(.*?);/)[1];
    let suffix = mime.split('/')[1] ;// å›¾ç‰‡åç¼€
    let bstr = atob(arr[1]);
    let n = bstr.length;
    let u8arr = new Uint8Array(n);
    while (n--) {
        u8arr[n] = bstr.charCodeAt(n)
    }
    return new File([u8arr], `${filename}.${suffix}`, { type: mime })
};
```

## base64è½¬blob

```js
/**
 *  @param { base64 } base64
 */
export const base64ToBlob = base64 => {
    let arr = base64.split(','),
        mime = arr[0].match(/:(.*?);/)[1],
        bstr = atob(arr[1]),
        n = bstr.length,
        u8arr = new Uint8Array(n);
    while (n--) {
        u8arr[n] = bstr.charCodeAt(n);
    }
    return new Blob([u8arr], { type: mime });
};
```

## blobè½¬file

```js
/**
 *  @param { blob } blob
 *  @param { string } fileName
 */
export const blobToFile = (blob, fileName) => {
    blob.lastModifiedDate = new Date();
    blob.name = fileName;
    return blob;
};
```

## fileè½¬base64

```js
/**
 * @param { * } file å›¾ç‰‡æ–‡ä»¶
 */
export const fileToBase64 = file => {
    let reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = function (e) {
        return e.target.result
    };
};
```

## åŠ æ³•å‡½æ•°ï¼ˆç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼‰

```js
/**
 * @param { number } arg1
 * @param { number } arg2
 */
export function add(arg1, arg2) {
    let r1, r2, m;
    try { r1 = arg1.toString().split(".")[1].length } catch (e) { r1 = 0 }
    try { r2 = arg2.toString().split(".")[1].length } catch (e) { r2 = 0 }
    m = Math.pow(10, Math.max(r1, r2));
    return (arg1 * m + arg2 * m) / m
}
```

## å‡æ³•å‡½æ•°ï¼ˆç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼‰

```js
/**
 * @param { number } arg1
 * @param { number } arg2
 */
export function sub(arg1, arg2) {
    let r1, r2, m, n;
    try { r1 = arg1.toString().split(".")[1].length } catch (e) { r1 = 0 }
    try { r2 = arg2.toString().split(".")[1].length } catch (e) { r2 = 0 }
    m = Math.pow(10, Math.max(r1, r2));
    n = (r1 >= r2) ? r1 : r2;
    return Number(((arg1 * m - arg2 * m) / m).toFixed(n));
}
```

## é™¤æ³•å‡½æ•°ï¼ˆç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼‰

```js
/**
 * @param { number } num1
 * @param { number } num2
 */
export function division(num1,num2){
    let t1,t2,r1,r2;
    try{
        t1 = num1.toString().split('.')[1].length;
    }catch(e){
        t1 = 0;
    }
    try{
        t2=num2.toString().split(".")[1].length;
    }catch(e){
        t2=0;
    }
    r1=Number(num1.toString().replace(".",""));
    r2=Number(num2.toString().replace(".",""));
    return (r1/r2)*Math.pow(10,t2-t1);
}
```

## ä¹˜æ³•å‡½æ•°ï¼ˆç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼‰

```js
/**
 * @param { number } num1
 * @param { number } num2
 */
export function mcl(num1,num2){
    let m=0,s1=num1.toString(),s2=num2.toString();
    try{m+=s1.split(".")[1].length}catch(e){}
    try{m+=s2.split(".")[1].length}catch(e){}
    return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m);
}
```

## åˆ¤æ–­æ•°æ®ç±»å‹

```js
/**
 * @param {*} target 
 */
export function type(target) {
    let ret = typeof(target);
    let template = {
        "[object Array]": "array",
        "[object Object]":"object",
        "[object Number]":"number - object",
        "[object Boolean]":"boolean - object",
        "[object String]":'string-object'
    };

    if(target === null) {
        return 'null';
    }else if(ret == "object"){
        let str = Object.prototype.toString.call(target);
        return template[str];
    }else{
        return ret;
    }
}
```

## å»é™¤ç©ºæ ¼

```js
/**
 * @param { string } str å¾…å¤„ç†å­—ç¬¦ä¸²
 * @param  { number } type å»é™¤ç©ºæ ¼ç±»å‹ 1-æ‰€æœ‰ç©ºæ ¼  2-å‰åç©ºæ ¼  3-å‰ç©ºæ ¼ 4-åç©ºæ ¼ é»˜è®¤ä¸º1
 */
export function trim(str, type = 1) {
    if (type && type !== 1 && type !== 2 && type !== 3 && type !== 4) return;
    switch (type) {
        case 1:
            return str.replace(/\s/g, "");
        case 2:
            return str.replace(/(^\s)|(\s*$)/g, "");
        case 3:
            return str.replace(/(^\s)/g, "");
        case 4:
            return str.replace(/(\s$)/g, "");
        default:
            return str;
    }
}
```

## éšæœº16è¿›åˆ¶é¢œè‰² hexColor

```js
export function hexColor() {
    let str = '#';
    let arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'A', 'B', 'C', 'D', 'E', 'F'];
    for (let i = 0; i < 6; i++) {
        let index = Number.parseInt((Math.random() * 16).toString());
        str += arr[index]
    }
    return str;
}
```

## éšæœº16è¿›åˆ¶é¢œè‰² randomHexColorCode

```js
export const randomHexColorCode = () => {
    let n = (Math.random() * 0xfffff * 1000000).toString(16);
    return '#' + n.slice(0, 6);
};

```

## æ•°å­—è¶…è¿‡è§„å®šå¤§å°åŠ ä¸ŠåŠ å·â€œ+â€ï¼Œå¦‚æ•°å­—è¶…è¿‡99æ˜¾ç¤º99+

```js
/**
 * @param { number } val è¾“å…¥çš„æ•°å­—
 * @param { number } maxNum æ•°å­—è§„å®šç•Œé™
 */
export const outOfNum = (val, maxNum) =>{
    val = val ? val-0 :0;
    if (val > maxNum ) {
        return `${maxNum}+`
    }else{
        return val;
    }
};
```

**å‚è€ƒèµ„æ–™ï¼š**

* [30 seconds of code](https://github.com/30-seconds/30-seconds-of-code)
* [JavaScript å·¥å…·å‡½æ•°å¤§å…¨ï¼ˆæ–°ï¼‰](https://juejin.im/post/5da1a04ae51d45783d6122bf#heading-86)
* [çµæ´»è¿ç”¨JSå¼€å‘æŠ€å·§](https://juejin.im/post/5cc7afdde51d456e671c7e48#heading-61)
